<?php/* Подключаем все доп.файлы */load_template( dirname( __FILE__ ) .'/inc/template-functions.php', true );load_template( dirname( __FILE__ ) .'/inc/customizer.php', true );load_template( dirname( __FILE__ ) .'/inc/registers.php', true );/* Регистрация 2 меню */register_nav_menus(array(	'top' => 'Верхнее',	'bottom' => 'Внизу'));/* включаем поддержку миниатюр */add_theme_support('post-thumbnails');/* Регистрация сайдбара */register_sidebar(array( // регистрируем левую колонку, этот кусок можно повторять для добавления новых областей для виджитов	'name' => 'Колонка слева', // Название в админке	'id' => "left-sidebar", // идентификатор для вызова в шаблонах	'description' => 'Обычная колонка в сайдбаре', // Описалово в админке	'before_widget' => '<div id="%1$s" class="widget %2$s">', // разметка до вывода каждого виджета	'after_widget' => "</div>\n", // разметка после вывода каждого виджета	'before_title' => '<span class="widgettitle">', //  разметка до вывода заголовка виджета	'after_title' => "</span>\n", //  разметка после вывода заголовка виджета));/* Загрузка из подвала */function footer_enqueue_scripts(){	remove_action('wp_head','wp_print_scripts');	remove_action('wp_head','wp_print_head_scripts',9);	remove_action('wp_head','wp_enqueue_scripts',1);	add_action('wp_footer','wp_print_scripts',5);	add_action('wp_footer','wp_enqueue_scripts',5);	add_action('wp_footer','wp_print_head_scripts',5);}add_action('after_setup_theme','footer_enqueue_scripts');/* Отключаем wp-embed */function my_deregister_scripts(){	wp_deregister_script( 'wp-embed' );}add_action( 'init', 'my_deregister_scripts' );/* правильный способ подключить стили и скрипты */function scf_theme_scripts() {	// Подключаем стили	wp_enqueue_style( 'slick-style', '//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css' );	wp_enqueue_style( 'main-style', get_stylesheet_directory_uri().'/css/main.css' );	wp_enqueue_style( 'wp-style', get_stylesheet_uri() );	// Подключаем скрипты	wp_enqueue_script( 'slick-scr', '//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js', array('jquery'), '1.0.0');	wp_enqueue_script( 'main-scr', get_stylesheet_directory_uri().'/js/main.js', array('jquery'), '1.0.0');}add_action( 'wp_enqueue_scripts', 'scf_theme_scripts' );/*  Выводим правильный last-modified */function lastmode_headers() {	if(is_singular()) {		global $post;		$LastModified = get_the_modified_time("D, d M Y H:i:s", $post->id);		$IfModifiedSince = false;		if (isset($_ENV['HTTP_IF_MODIFIED_SINCE']))			$IfModifiedSince = strtotime(substr($_ENV['HTTP_IF_MODIFIED_SINCE'], 5));		if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']))			$IfModifiedSince = strtotime(substr($_SERVER['HTTP_IF_MODIFIED_SINCE'], 5));		if ($IfModifiedSince && $IfModifiedSince >= $LastModified_unix) {			header($_SERVER['SERVER_PROTOCOL'] . ' 304 Not Modified');			exit;		}		header('Last-Modified: '. $LastModified);	}}add_action('template_redirect', 'lastmode_headers');/* Отключаем емоджи */remove_action( 'wp_head', 'print_emoji_detection_script', 7 );remove_action( 'wp_print_styles', 'print_emoji_styles' );